"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8727],{8727:(S,P,u)=>{u.r(P),u.d(P,{RegisterPageModule:()=>N});var _=u(6814),r=u(95),c=u(9843),h=u(2692),f=u(5861),e=u(5879),M=u(547),Z=u(4532);function b(t,l){1&t&&(e.TgZ(0,"p",17),e._uU(1,"Por favor, introduce un nombre."),e.qZA())}function C(t,l){1&t&&(e.TgZ(0,"p",17),e._uU(1,"Por favor, introduce un correo electronico."),e.qZA())}function w(t,l){1&t&&(e.TgZ(0,"p",17),e._uU(1,"Por favor, introduce una contrase\xf1a."),e.qZA())}function y(t,l){1&t&&(e.TgZ(0,"p",17),e._uU(1,"El correo electr\xf3nico debe contener '@duocuc.cl' o '@profesor.duoc.cl'."),e.qZA())}function O(t,l){1&t&&(e.TgZ(0,"p",17),e._uU(1,"Por favor, introduce una contrase\xf1a."),e.qZA())}function I(t,l){1&t&&(e.TgZ(0,"p",17),e._uU(1,"La contrase\xf1a debe tener al menos 8 caracteres."),e.qZA())}function T(t,l){1&t&&(e.TgZ(0,"p",17),e._uU(1,"Las contrase\xf1as no coinciden."),e.qZA())}function R(t){const l=t.value,g=l.substring(l.lastIndexOf("@")+1);return""===l||"duocuc.cl"===g.toLowerCase()||"profesor.duoc.cl"===g.toLowerCase()?null:{emailDomain:!0}}const A=[{path:"",component:(()=>{var t;class l{constructor(o,n){this.router=o,this.alertController=n,this.firebaseSvc=(0,e.f3M)(M.O),this.utilsSvc=(0,e.f3M)(Z.F),this.form=new r.cw({uid:new r.NI(""),email:new r.NI("",[r.kI.required,r.kI.email,R]),password:new r.NI("",[r.kI.required,r.kI.minLength(8)]),password2:new r.NI("",[r.kI.required,r.kI.minLength(8)]),name:new r.NI("",[r.kI.required,r.kI.minLength(6)])},{validators:this.MustMatch("password","password2")})}ngOnInit(){}onSubmit(){var o=this;return(0,f.Z)(function*(){if(o.form.valid){const n=yield o.utilsSvc.loading();yield n.present(),o.firebaseSvc.signUp(o.form.value).then(function(){var a=(0,f.Z)(function*(s){yield o.firebaseSvc.updateUser(o.form.value.name);let i=s.user.uid;o.form.controls.uid.setValue(i),o.setUserInfo(i),setTimeout(()=>{o.router.navigate(["/login"])},1e3)});return function(s){return a.apply(this,arguments)}}()).catch(a=>{console.log(a),o.presentAlert()}).finally(()=>{n.dismiss()})}})()}presentAlert(){var o=this;return(0,f.Z)(function*(){yield(yield o.alertController.create({header:"Alerta",subHeader:"Informaci\xf3n",message:"Valores no validos",buttons:["OK"],backdropDismiss:!1})).present()})()}MustMatch(o,n){return a=>a.controls[o].value!==a.controls[n].value?{mustMatch:!0}:null}setUserInfo(o){var n=this;return(0,f.Z)(function*(){if(n.form.valid){const a=yield n.utilsSvc.loading();yield a.present(),n.firebaseSvc.setDocument(`users/${o}`,n.form.value).then(function(){var i=(0,f.Z)(function*(m){n.utilsSvc.routerLink("/login"),n.utilsSvc.saveInLocalStorage("user",n.form.value),console.log(m)});return function(m){return i.apply(this,arguments)}}()).catch(i=>{console.log(i),n.presentAlert()}).finally(()=>{a.dismiss()})}})()}}return(t=l).\u0275fac=function(o){return new(o||t)(e.Y36(h.F0),e.Y36(c.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:32,vars:9,consts:[[1,"ion-padding"],["id","header"],["id","app-var"],["name","arrow-back","routerLink","../"],["id","logo"],["src","assets/icon/logo_duoc_uc.svg","alt",""],[1,"wrapper"],[3,"formGroup","ngSubmit"],["name","person",1,"ion-padding"],["labelPlacement","floating","label","Nombre Completo","required","","type","text","aria-label","text","name","name","formControlName","name"],["class","Error",4,"ngIf"],["name","mail",1,"ion-padding"],["labelPlacement","floating","label","E-mail","required","","type","email","aria-label","Email","name","email","formControlName","email"],["name","lock-closed",1,"ion-padding"],["labelPlacement","floating","label","Contrase\xf1a","required","","type","password","aria-label","password","name","password","formControlName","password"],["labelPlacement","floating","label","Repita su contrase\xf1a","required","","type","password","aria-label","password","name","password2","formControlName","password2"],["expand","full","color","warning","type","submit",1,"ion-padding",3,"disabled"],[1,"Error"]],template:function(o,n){if(1&o&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._UZ(3,"ion-icon",3),e.TgZ(4,"div",4),e._UZ(5,"img",5),e.qZA()()(),e.TgZ(6,"div",6)(7,"ion-card")(8,"h3"),e._uU(9,"Registro"),e.qZA(),e.TgZ(10,"form",7),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(11,"ion-item"),e._UZ(12,"ion-icon",8)(13,"ion-input",9),e.qZA(),e.YNc(14,b,2,0,"p",10),e.TgZ(15,"ion-item"),e._UZ(16,"ion-icon",11)(17,"ion-input",12),e.qZA(),e.YNc(18,C,2,0,"p",10),e.YNc(19,w,2,0,"p",10),e.YNc(20,y,2,0,"p",10),e.TgZ(21,"ion-item"),e._UZ(22,"ion-icon",13)(23,"ion-input",14),e.qZA(),e.YNc(24,O,2,0,"p",10),e.YNc(25,I,2,0,"p",10),e.TgZ(26,"ion-item"),e._UZ(27,"ion-icon",13)(28,"ion-input",15),e.qZA(),e.YNc(29,T,2,0,"p",10),e.TgZ(30,"ion-button",16),e._uU(31," Registrarse "),e.qZA()()()()()),2&o){let a,s,i,m,p,d,v;e.xp6(10),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("ngIf",(null==(a=n.form.get("name"))?null:a.invalid)&&(null==(a=n.form.get("name"))?null:a.touched)),e.xp6(4),e.Q6J("ngIf",n.form&&(null==(s=n.form.get("email"))?null:s.invalid)&&(null==(s=n.form.get("email"))?null:s.touched)),e.xp6(1),e.Q6J("ngIf",n.form&&(null==(i=n.form.get("control"))?null:i.errors)&&(null==(i=n.form.get("control"))?null:i.errors.required)&&(null==(i=n.form.get("control"))?null:i.touched)),e.xp6(1),e.Q6J("ngIf",n.form&&(null==(m=n.form.get("email"))?null:m.errors)&&(null==(m=n.form.get("email"))?null:m.errors.emailDomain)&&(null==(m=n.form.get("email"))?null:m.touched)),e.xp6(4),e.Q6J("ngIf",(null==(p=n.form.get("password"))?null:p.errors)&&(null==(p=n.form.get("password"))?null:p.errors.required)&&(null==(p=n.form.get("password"))?null:p.touched)),e.xp6(1),e.Q6J("ngIf",(null==(d=n.form.get("password"))?null:d.errors)&&(null==(d=n.form.get("password"))?null:d.errors.minlength)&&(null==(d=n.form.get("password"))?null:d.touched)),e.xp6(4),e.Q6J("ngIf",(null==n.form.errors?null:n.form.errors.mustMatch)&&(null==(v=n.form.get("password2"))?null:v.touched)),e.xp6(1),e.Q6J("disabled",n.form.invalid)}},dependencies:[_.O5,r._Y,r.JJ,r.JL,r.Q7,c.YG,c.PM,c.W2,c.gu,c.pK,c.Ie,c.j9,c.YI,h.rH,r.sg,r.u],styles:["ion-content[_ngcontent-%COMP%]{--backgrond: #e0dfe6}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{height:33%;background:#071b43;border-radius:0 0 28px 20px;display:flex;flex-direction:column;color:#fff;padding:20px}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;align-items:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-left:-5px}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{width:30px;height:50px;display:flex;justify-content:center;align-items:center;align-self:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:absolute;top:26%;left:4%;right:4%}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:19px;margin-bottom:1.4;text-align:center}*[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}"]}),l})()}];let U=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(A),h.Bz]}),l})(),N=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.ez,r.u5,c.Pc,U,r.UX]}),l})()}}]);