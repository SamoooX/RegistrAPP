"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(y,m,s)=>{s.r(m),s.d(m,{LoginPageModule:()=>b});var f=s(6814),a=s(95),l=s(9843),d=s(2692),p=s(5861),n=s(5879),P=s(547),v=s(4532),h=s(6401);function C(t,r){1&t&&(n.TgZ(0,"p",18),n._uU(1,"Por favor, introduce un correo electronico."),n.qZA())}function M(t,r){1&t&&(n.TgZ(0,"p",18),n._uU(1,"Por favor, introduce una contrase\xf1a."),n.qZA())}function O(t){const r=t.value,c=r.substring(r.lastIndexOf("@")+1);return""===r||"duocuc.cl"===c.toLowerCase()||"profesor.duoc.cl"===c.toLowerCase()?null:{emailDomain:!0}}const _=[{path:"",component:(()=>{var t;class r{constructor(e,o,i){this.router=e,this.alertController=o,this.dataService=i,this.firebaseSvc=(0,n.f3M)(P.O),this.utilsSvc=(0,n.f3M)(v.F),this.loginForm=new a.cw({email:new a.NI("",[a.kI.required,a.kI.email,O]),password:new a.NI("",[a.kI.required])})}setPermission(e){this.dataService.setPermission(e)}ngOnInit(){}onSubmit(){var e=this;return(0,p.Z)(function*(){if(e.loginForm.valid){const o=yield e.utilsSvc.loading();yield o.present(),e.firebaseSvc.signIn(e.loginForm.value).then(i=>{const g=e.loginForm.get("email").value,u=g.substring(g.lastIndexOf("@")+1);"duocuc.cl"===u.toLowerCase()?e.dataService.setPermission(!1):"profesor.duoc.cl"===u.toLowerCase()&&e.dataService.setPermission(!0),e.router.navigate(["tab/home"]),e.getUserInfo(i.user.uid)}).catch(i=>{console.log(i),e.presentAlert()}).finally(()=>{o.dismiss()})}})()}presentAlert(){var e=this;return(0,p.Z)(function*(){yield(yield e.alertController.create({header:"Alerta",subHeader:"Informaci\xf3n",message:"Usuario y/o password incorrectos",buttons:["OK"],backdropDismiss:!1})).present()})()}getUserInfo(e){var o=this;return(0,p.Z)(function*(){if(o.loginForm.valid){const i=yield o.utilsSvc.loading();yield i.present(),o.firebaseSvc.getDocument(`users/${e}`).then(u=>{o.utilsSvc.saveInLocalStorage("user",u)}).catch(u=>{console.log(u),o.presentAlert()}).finally(()=>{i.dismiss()})}})()}}return(t=r).\u0275fac=function(e){return new(e||t)(n.Y36(d.F0),n.Y36(l.Br),n.Y36(h.D))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:32,vars:3,consts:[[1,"ion-padding"],["id","header"],["id","app-var"],["id","logo"],["src","assets/icon/logo_duoc_uc.svg","alt",""],[1,"wrapper"],[3,"formGroup","ngSubmit"],["name","mail",1,"ion-padding"],["labelPlacement","floating","label","E-mail","required","","type","email","aria-label","Email","name","email","formControlName","email"],["class","Error",4,"ngIf"],["name","lock-closed",1,"ion-padding"],["labelPlacement","floating","label","Password","required","","type","password","aria-label","password","name","password","formControlName","password"],["expand","full","color","warning","type","submit",1,"animate__animated","animate__flip",3,"click"],[1,"line-text","ion-padding"],[1,"lines"],[1,"text"],["href","/recuperar-contra"],["href","/register"],[1,"Error"]],template:function(e,o){if(1&e&&(n.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),n._UZ(4,"img",4),n.qZA()()(),n.TgZ(5,"div",5)(6,"ion-card")(7,"h3"),n._uU(8,"Iniciar Sesi\xf3n"),n.qZA(),n.TgZ(9,"form",6),n.NdJ("ngSubmit",function(){return o.onSubmit()}),n.TgZ(10,"ion-item"),n._UZ(11,"ion-icon",7)(12,"ion-input",8),n.qZA(),n.YNc(13,C,2,0,"p",9),n.TgZ(14,"ion-item"),n._UZ(15,"ion-icon",10)(16,"ion-input",11),n.qZA(),n.YNc(17,M,2,0,"p",9),n.TgZ(18,"ion-button",12),n.NdJ("click",function(){return o.setPermission(!1)}),n._uU(19,"Iniciar sesi\xf3n"),n.qZA()()(),n.TgZ(20,"div",13),n._UZ(21,"span",14),n.TgZ(22,"span",15)(23,"a",16),n._uU(24,"\xbfOlvidaste tu contrase\xf1a?"),n.qZA()()(),n.TgZ(25,"div",13),n._UZ(26,"span",14),n.TgZ(27,"span",15),n._uU(28,"\xbfA\xfan no tienes cuenta? "),n.qZA(),n.TgZ(29,"span",15)(30,"a",17),n._uU(31,"Registrate"),n.qZA()()()()()),2&e){let i,g;n.xp6(9),n.Q6J("formGroup",o.loginForm),n.xp6(4),n.Q6J("ngIf",(null==(i=o.loginForm.get("email"))?null:i.invalid)&&(null==(i=o.loginForm.get("email"))?null:i.touched)),n.xp6(4),n.Q6J("ngIf",(null==(g=o.loginForm.get("password"))?null:g.invalid)&&(null==(g=o.loginForm.get("password"))?null:g.touched))}},dependencies:[f.O5,a._Y,a.JJ,a.JL,a.Q7,l.YG,l.PM,l.W2,l.gu,l.pK,l.Ie,l.j9,a.sg,a.u],styles:["ion-content[_ngcontent-%COMP%]{--backgrond: #e0dfe6}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{height:33%;background:#071b43;border-radius:0 0 28px 20px;display:flex;flex-direction:column;color:#fff;padding:20px}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;align-items:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-left:-5px}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{width:30px;height:50px;display:flex;justify-content:center;align-items:center;align-self:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:absolute;top:26%;left:4%;right:4%}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:19px;margin-bottom:1.4;text-align:center}*[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}.toast[_ngcontent-%COMP%]   .toast-wrapper[_ngcontent-%COMP%]{align-items:center;justify-content:center}"]}),r})()}];let Z=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[d.Bz.forChild(_),d.Bz]}),r})(),b=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[f.ez,a.u5,l.Pc,Z,a.UX]}),r})()}}]);